<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="img/logo.png" type="image/x-icon">
    <title>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –∑–≤–µ–∑–¥–Ω–æ–µ –Ω–µ–±–æ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: #000;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            color: white;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: none; /* –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫—É—Ä—Å–æ—Ä */
        }
        
        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        .message {
            position: absolute;
            bottom: 20%;
            text-align: center;
            opacity: 0;
            transition: opacity 2s ease-in-out;
            z-index: 2;
            font-size: 2.5rem;
            text-shadow: 0 0 10px rgba(255, 100, 100, 0.7);
            padding: 0 20px;
        }
        
        .message.show {
            opacity: 1;
        }
        
        .instructions {
            position: absolute;
            bottom: 10%;
            text-align: center;
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            z-index: 2;
            max-width: 80%;
            line-height: 1.5;
            text-align: center;
        }
        
        .flashlight {
            position: absolute;
            pointer-events: none;
            z-index: 3;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: radial-gradient(
                circle,
                rgba(255, 255, 255, 0.15) 0%,
                rgba(255, 255, 255, 0.05) 30%,
                transparent 70%
            );
            transform: translate(-50%, -50%);
            mix-blend-mode: screen;
            display: none; /* –§–æ–Ω–∞—Ä–∏–∫ –≤—ã–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        }
        
        .flashlight.enabled {
            display: block; /* –í–∫–ª—é—á–∞–µ–º —Ñ–æ–Ω–∞—Ä–∏–∫ */
        }
        
        .progress {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 1.2rem;
            z-index: 2;
            color: rgba(255, 220, 100, 0.9);
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        
        .hint {
            position: absolute;
            top: 60px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 1rem;
            z-index: 2;
            color: rgba(255, 255, 255, 0.7);
            opacity: 0;
            transition: opacity 0.5s;
        }
        
        .hint.show {
            opacity: 1;
        }
        
        .controls {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 2;
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-end;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 12px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .volume-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .volume-slider {
            width: 80px;
            height: 4px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            outline: none;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: rgba(255, 220, 100, 0.9);
            cursor: pointer;
            box-shadow: 0 0 5px rgba(255, 220, 100, 0.5);
        }
        
        .volume-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: rgba(255, 220, 100, 0.9);
            cursor: pointer;
            border: none;
            box-shadow: 0 0 5px rgba(255, 220, 100, 0.5);
        }
        
        .flashlight-toggle {
            background: rgba(255, 0, 0, 0.3); /* –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç - —Ñ–æ–Ω–∞—Ä–∏–∫ –≤—ã–∫–ª—é—á–µ–Ω */
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }
        
        .flashlight-toggle:hover {
            background: rgba(255, 0, 0, 0.4);
        }
        
        .flashlight-toggle.enabled {
            background: rgba(255, 255, 255, 0.2); /* –ë–µ–ª—ã–π —Ü–≤–µ—Ç - —Ñ–æ–Ω–∞—Ä–∏–∫ –≤–∫–ª—é—á–µ–Ω */
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
        }
        
        .flashlight-toggle.enabled:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .discovery {
            position: absolute;
            z-index: 2;
            opacity: 0;
            transition: opacity 0.8s ease-in-out;
            pointer-events: none;
            max-width: 300px;
            max-height: 300px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }
        
        .discovery.show {
            opacity: 1;
        }
        
        .discovery img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .discovery-text {
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            max-width: 250px;
            text-align: center;
            font-size: 1.1rem;
            line-height: 1.4;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –∫—É—Ä—Å–æ—Ä–∞ */
        .custom-cursor {
            position: absolute;
            width: 20px;
            height: 20px;
            pointer-events: none;
            z-index: 10;
            transform: translate(-50%, -50%);
            transition: transform 0.1s ease;
        }
        
        .cursor-star {
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.4) 70%, transparent 100%);
            border-radius: 50%;
            box-shadow: 0 0 10px 3px rgba(255, 255, 255, 0.7),
                        0 0 20px 5px rgba(100, 200, 255, 0.5),
                        0 0 30px 10px rgba(100, 150, 255, 0.3);
            animation: pulse 2s infinite alternate;
        }
        
        .cursor-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 40px;
            height: 40px;
            transform: translate(-50%, -50%);
            background: radial-gradient(circle, rgba(100, 200, 255, 0.3) 0%, transparent 70%);
            border-radius: 50%;
            animation: glow 3s infinite alternate;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 0 10px 3px rgba(255, 255, 255, 0.7),
                            0 0 20px 5px rgba(100, 200, 255, 0.5),
                            0 0 30px 10px rgba(100, 150, 255, 0.3);
            }
            100% {
                transform: scale(1.1);
                box-shadow: 0 0 15px 5px rgba(255, 255, 255, 0.8),
                            0 0 25px 8px rgba(100, 200, 255, 0.6),
                            0 0 35px 12px rgba(100, 150, 255, 0.4);
            }
        }
        
        @keyframes glow {
            0% {
                opacity: 0.5;
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                opacity: 0.8;
                transform: translate(-50%, -50%) scale(1.2);
            }
        }
    </style>
</head>
<body>
    <canvas id="starCanvas"></canvas>
    <div class="flashlight" id="flashlight"></div>
    
    <!-- –ö–∞—Å—Ç–æ–º–Ω—ã–π –∫—É—Ä—Å–æ—Ä -->
    <div class="custom-cursor" id="customCursor">
        <div class="cursor-glow"></div>
        <div class="cursor-star"></div>
    </div>
    
    <div class="progress" id="progress">–°–æ–∑–≤–µ–∑–¥–∏–µ: 0/16</div>
    <div class="hint" id="hint">–ù–∞–π–¥–∏ —Å–ª–µ–¥—É—é—â—É—é –∑–≤–µ–∑–¥—É –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Å–æ–∑–≤–µ–∑–¥–∏—è</div>
    <div class="message" id="message">–ë–ª–∞–≥–æ–¥–∞—Ä—è —Ç–µ–±–µ, –≤—Å–µ –∑–≤–µ–∑–¥—ã –Ω–∞ –º–æ–µ–º –Ω–µ–±–µ –≥–æ—Ä—è—Ç —è—Ä–∫–∏–º –ø–ª–∞–º–µ–Ω–µ–º. <p>–°–ø–∞—Å–∏–±–æ –∑–∞ —Ç–æ, —á—Ç–æ —Ç—ã –µ—Å—Ç—å, —è —Ç–µ–±—è –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –ª—é–±–ª—é.</p> <p>–° –î–Ω–µ–º –†–æ–∂–¥–µ–Ω–∏—è, –ö–∞—Å–∞—Ç–∏–∫‚ù§Ô∏è</p></div>
    <div class="instructions">–¢—É—Ç –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ, –ø–æ–∏—â–∏)</div>
    
    <div class="controls">
        <div class="control-group">
            <div class="volume-control">
                <span style="color: rgba(255, 220, 100, 0.9);">‚ô™</span>
                <input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.1" value="0.5">
            </div>
        </div>
        <div class="control-group">
            <div class="flashlight-toggle" id="flashlightToggle">üî¶</div>
        </div>
    </div>
    
    <!-- –û–±–ª–∞—Å—Ç–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏ —Ç–µ–∫—Å—Ç–æ–º -->
    <div class="discovery" id="discovery1">
        <img src="img/constellation1.jpg" alt="–°–æ–∑–≤–µ–∑–¥–∏–µ –û—Ä–∏–æ–Ω–∞">
    </div>
    <div class="discovery" id="discovery2">
        <div class="discovery-text">–ö–æ–≥–¥–∞ —è —Å–º–æ—Ç—Ä—é –≤ —Ç–≤–æ–∏ –≥–ª–∞–∑–∞, —è –∫–∞–∫-–±—É–¥—Ç–æ —Å–º–æ—Ç—Ä—é –≤ –∫–æ—Å–º–æ—Å, –≤ –ø–æ—Ç—Ä—è—Å–∞—é—â–∏–π –∏ –∑–∞–≤–æ—Ä–∞–∂–∏–≤–∞—é—â–∏–π</div>
    </div>
    <div class="discovery" id="discovery4">
        <div class="discovery-text">–¢–≤–æ—è —É–ª—ã–±–∫–∞ - —ç—Ç–æ —Å–æ–ª–Ω—Ü–µ, —Å–∏—è—é—â–µ–µ —è—Ä—á–µ –ª—é–±—ã—Ö –∑–≤–µ–∑–¥ –∏ –¥–µ–ª–∞—é—â–µ–µ –º–µ–Ω—è —Å—á–∞—Å—Ç–ª–∏–≤—ã–º</div>
    </div>
    <div class="discovery" id="discovery3">
        <div class="discovery-text">–¢—ã ‚Äî —Å–∞–º–æ–µ –∫—Ä–∞—Å–∏–≤–æ–µ —Å–æ–∑–≤–µ–∑–¥–∏–µ –≤ –º–æ–µ–π –≥–∞–ª–∞–∫—Ç–∏–∫–µ</div>
    </div>
    
    <audio id="backgroundMusic" loop autoplay>
        <!-- –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –º—É–∑—ã–∫–∏ -->
        <source src="audio/space-music.mp3" type="audio/mpeg">
        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç.
    </audio>

    <script>
        // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã DOM
        const canvas = document.getElementById('starCanvas');
        const ctx = canvas.getContext('2d');
        const flashlight = document.getElementById('flashlight');
        const customCursor = document.getElementById('customCursor');
        const message = document.getElementById('message');
        const progress = document.getElementById('progress');
        const hint = document.getElementById('hint');
        const backgroundMusic = document.getElementById('backgroundMusic');
        const volumeSlider = document.getElementById('volumeSlider');
        const flashlightToggle = document.getElementById('flashlightToggle');

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã canvas
        function setCanvasSize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        setCanvasSize();
        window.addEventListener('resize', setCanvasSize);

        // –°–æ–∑–¥–∞–µ–º –∑–≤–µ–∑–¥—ã
        const stars = [];
        const specialStars = []; // –û—Å–æ–±—ã–µ –∑–≤–µ–∑–¥—ã –¥–ª—è —Å–æ–∑–≤–µ–∑–¥–∏—è
        const constellationPoints = []; // –¢–æ—á–∫–∏ —Å–æ–∑–≤–µ–∑–¥–∏—è
        const activatedStars = []; // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–≤–µ–∑–¥—ã —Å–æ–∑–≤–µ–∑–¥–∏—è
        let isConstellationComplete = false;
        let totalSpecialStars = 16; // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–µ–∑–¥ –≤ —Å–æ–∑–≤–µ–∑–¥–∏–∏
        let nextStarIndex = 0; // –ò–Ω–¥–µ–∫—Å —Å–ª–µ–¥—É—é—â–µ–π –∑–≤–µ–∑–¥—ã, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
        let flashlightEnabled = true; // –§–æ–Ω–∞—Ä–∏–∫ –≤—ã–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        let nextStarPulseTimer = 0; // –¢–∞–π–º–µ—Ä –¥–ª—è –ø—É–ª—å—Å–∞—Ü–∏–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–≤–µ–∑–¥—ã
        let isNextStarPulsing = false; // –§–ª–∞–≥, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π, –ø—É–ª—å—Å–∏—Ä—É–µ—Ç –ª–∏ —Å–ª–µ–¥—É—é—â–∞—è –∑–≤–µ–∑–¥–∞

        // –û–±–ª–∞—Å—Ç–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ —ç–ª–µ–º–µ–Ω—Ç—ã)
        const discoveryAreas = [
            { x: 100, y: 150, width: 200, height: 200, element: document.getElementById('discovery1') },
            { x: canvas.width - 300, y: 100, width: 250, height: 150, element: document.getElementById('discovery2') },
            { x: 200, y: canvas.height - 300, width: 180, height: 180, element: document.getElementById('discovery3') },
            { x: canvas.width - 320, y: canvas.height - 350, width: 220, height: 120, element: document.getElementById('discovery4') }
        ];

        // –ö–ª–∞—Å—Å –¥–ª—è –∑–≤–µ–∑–¥—ã
        class Star {
            constructor(x, y, radius, isSpecial = false, specialIndex = -1) {
                this.x = x;
                this.y = y;
                this.radius = radius;
                this.baseRadius = radius;
                this.isSpecial = isSpecial;
                this.specialIndex = specialIndex;
                this.brightness = Math.random() * 0.5 + 0.5;
                this.twinkleSpeed = Math.random() * 0.05 + 0.02;
                this.twinkleDirection = 1;
                this.isHighlighted = false;
                this.isActivated = false;
                this.isNext = false;
                
                if (isSpecial) {
                    specialStars.push(this);
                } else {
                    stars.push(this);
                }
            }
            
            update() {
                // –ú–µ—Ä—Ü–∞–Ω–∏–µ –∑–≤–µ–∑–¥
                this.brightness += this.twinkleSpeed * this.twinkleDirection;
                if (this.brightness >= 1 || this.brightness <= 0.5) {
                    this.twinkleDirection *= -1;
                }
                
                // –≠—Ñ—Ñ–µ–∫—Ç –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
                if (this.isHighlighted) {
                    this.radius = this.baseRadius * 2;
                } else {
                    this.radius = this.baseRadius;
                }
                
                // –≠—Ñ—Ñ–µ–∫—Ç –¥–ª—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–≤–µ–∑–¥
                if (this.isActivated) {
                    this.radius = this.baseRadius * 1.5;
                }
                
                // –≠—Ñ—Ñ–µ–∫—Ç –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π –∑–≤–µ–∑–¥—ã (–ø—É–ª—å—Å–∞—Ü–∏—è)
                if (this.isNext && isNextStarPulsing) {
                    // –ü—É–ª—å—Å–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∏–Ω—É—Å–æ–∏–¥–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
                    const pulse = Math.sin(nextStarPulseTimer * 0.1) * 0.5 + 0.5; // –æ—Ç 0 –¥–æ 1
                    this.radius = this.baseRadius * (1.5 + pulse * 0.5);
                } else if (this.isNext) {
                    this.radius = this.baseRadius;
                }
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                
                if (this.isSpecial) {
                    // –û—Å–æ–±—ã–µ –∑–≤–µ–∑–¥—ã
                    if (this.isActivated) {
                        // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–≤–µ–∑–¥—ã - –∫—Ä–∞—Å–Ω—ã–µ
                        ctx.fillStyle = `rgba(255, 50, 50, ${this.brightness})`;
                    } else if (this.isNext && isNextStarPulsing) {
                        // –°–ª–µ–¥—É—é—â–∞—è –∑–≤–µ–∑–¥–∞ - –∂–µ–ª—Ç–∞—è —Å –ø—É–ª—å—Å–∞—Ü–∏–µ–π
                        const pulse = Math.sin(nextStarPulseTimer * 0.1) * 0.5 + 0.5;
                        ctx.fillStyle = `rgba(255, 220, 0, ${this.brightness * (0.7 + pulse * 0.3)})`;
                    } else {
                        // –û—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Å–æ–±—ã–µ –∑–≤–µ–∑–¥—ã - –±–µ–ª—ã–µ –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ
                        ctx.fillStyle = `rgba(255, 255, 255, ${this.brightness})`;
                    }
                } else {
                    // –û–±—ã—á–Ω—ã–µ –∑–≤–µ–∑–¥—ã
                    ctx.fillStyle = `rgba(255, 255, 255, ${this.brightness})`;
                }
                
                ctx.fill();
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–≤–µ—á–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥—Å–≤–µ—á–µ–Ω–Ω—ã—Ö –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–≤–µ–∑–¥
                if (this.isHighlighted || this.isActivated || (this.isNext && isNextStarPulsing)) {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.radius * 2, 0, Math.PI * 2);
                    const gradient = ctx.createRadialGradient(
                        this.x, this.y, this.radius,
                        this.x, this.y, this.radius * 2
                    );
                    
                    if (this.isActivated) {
                        gradient.addColorStop(0, `rgba(255, 50, 50, ${this.brightness * 0.7})`);
                        gradient.addColorStop(1, 'rgba(255, 50, 50, 0)');
                    } else if (this.isNext && isNextStarPulsing) {
                        const pulse = Math.sin(nextStarPulseTimer * 0.1) * 0.5 + 0.5;
                        gradient.addColorStop(0, `rgba(255, 220, 0, ${this.brightness * (0.5 + pulse * 0.3)})`);
                        gradient.addColorStop(1, 'rgba(255, 220, 0, 0)');
                    } else {
                        gradient.addColorStop(0, `rgba(255, 255, 255, ${this.brightness * 0.7})`);
                        gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
                    }
                    
                    ctx.fillStyle = gradient;
                    ctx.fill();
                }
            }
        }

        // –°–æ–∑–¥–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –∑–≤–µ–∑–¥—ã
        function createStars() {
            const starCount = 300; // –£–≤–µ–ª–∏—á–∏–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–µ–∑–¥
            
            for (let i = 0; i < starCount; i++) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height;
                const radius = Math.random() * 1.5 + 0.5;
                
                new Star(x, y, radius);
            }
            
            // –°–æ–∑–¥–∞–µ–º –æ—Å–æ–±—ã–µ –∑–≤–µ–∑–¥—ã –¥–ª—è —Å–æ–∑–≤–µ–∑–¥–∏—è (–≤ —Ñ–æ—Ä–º–µ —Å–µ—Ä–¥—Ü–∞)
            createConstellationStars();
        }

        // –°–æ–∑–¥–∞–µ–º –∑–≤–µ–∑–¥—ã –¥–ª—è —Å–æ–∑–≤–µ–∑–¥–∏—è –≤ —Ñ–æ—Ä–º–µ —Å–µ—Ä–¥—Ü–∞
        function createConstellationStars() {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const size = Math.min(canvas.width, canvas.height) * 0.3;
            
            // –§–æ—Ä–º—É–ª–∞ —Å–µ—Ä–¥—Ü–∞ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–π —Ñ–æ—Ä–º–µ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–æ—á–µ–∫
            const heartPoints = [];
            const steps = totalSpecialStars;
            
            for (let i = 0; i < steps; i++) {
                const t = (i / steps) * Math.PI * 2;
                
                // –ü–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–µ—Ä–¥—Ü–∞
                const x = 16 * Math.pow(Math.sin(t), 3);
                const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
                
                // –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –∏ —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º
                const scaledX = centerX + (x * size) / 16;
                const scaledY = centerY - (y * size) / 16;
                
                heartPoints.push({x: scaledX, y: scaledY});
            }
            
            // –°–æ–∑–¥–∞–µ–º –∑–≤–µ–∑–¥—ã –≤ —Ç–æ—á–∫–∞—Ö —Å–µ—Ä–¥—Ü–∞
            for (let i = 0; i < heartPoints.length; i++) {
                const point = heartPoints[i];
                new Star(point.x, point.y, 2, true, i);
                constellationPoints.push(point);
            }
            
            // –£–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é –∑–≤–µ–∑–¥—É –∫–∞–∫ —Å–ª–µ–¥—É—é—â—É—é
            if (specialStars.length > 0) {
                specialStars[0].isNext = true;
            }
            
            updateProgress();
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–æ–∑–≤–µ–∑–¥–∏—è
        function drawConstellation() {
            if (activatedStars.length < 2) return;
            
            // –†–∏—Å—É–µ–º –ª–∏–Ω–∏–∏ –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–≤–µ–∑–¥–∞–º–∏
            ctx.beginPath();
            ctx.moveTo(specialStars[activatedStars[0]].x, specialStars[activatedStars[0]].y);
            
            for (let i = 1; i < activatedStars.length; i++) {
                ctx.lineTo(specialStars[activatedStars[i]].x, specialStars[activatedStars[i]].y);
            }
            
            // –ì—Ä–∞–¥–∏–µ–Ω—Ç –¥–ª—è –ª–∏–Ω–∏–∏
            const gradient = ctx.createLinearGradient(
                specialStars[activatedStars[0]].x, specialStars[activatedStars[0]].y,
                specialStars[activatedStars[activatedStars.length-1]].x, specialStars[activatedStars[activatedStars.length-1]].y
            );
            gradient.addColorStop(0, 'rgba(255, 100, 100, 0.8)');
            gradient.addColorStop(1, 'rgba(255, 200, 100, 0.8)');
            
            ctx.strokeStyle = gradient;
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // –ï—Å–ª–∏ –≤—Å–µ –∑–≤–µ–∑–¥—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã, –∑–∞–º—ã–∫–∞–µ–º –∫–æ–Ω—Ç—É—Ä
            if (activatedStars.length === totalSpecialStars) {
                ctx.beginPath();
                ctx.moveTo(specialStars[activatedStars[activatedStars.length-1]].x, specialStars[activatedStars[activatedStars.length-1]].y);
                ctx.lineTo(specialStars[activatedStars[0]].x, specialStars[activatedStars[0]].y);
                
                const closingGradient = ctx.createLinearGradient(
                    specialStars[activatedStars[activatedStars.length-1]].x, specialStars[activatedStars[activatedStars.length-1]].y,
                    specialStars[activatedStars[0]].x, specialStars[activatedStars[0]].y
                );
                closingGradient.addColorStop(0, 'rgba(255, 100, 100, 0.8)');
                closingGradient.addColorStop(1, 'rgba(255, 200, 100, 0.8)');
                
                ctx.strokeStyle = closingGradient;
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                if (!isConstellationComplete) {
                    isConstellationComplete = true;
                    setTimeout(() => {
                        message.classList.add('show');
                    }, 1000);
                }
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        function updateProgress() {
            progress.textContent = `–°–æ–∑–≤–µ–∑–¥–∏–µ: ${activatedStars.length}/${totalSpecialStars}`;
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É
        function showHint(text) {
            hint.textContent = text;
            hint.classList.add('show');
            setTimeout(() => {
                hint.classList.remove('show');
            }, 2000);
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–ª–∞—Å—Ç–µ–π –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
        function checkDiscoveryAreas(x, y) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –æ–±–ª–∞—Å—Ç–∏
            discoveryAreas.forEach(area => {
                area.element.classList.remove('show');
            });
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —Ñ–æ–Ω–∞—Ä–∏–∫ –≤ –∫–∞–∫–æ–π-–ª–∏–±–æ –æ–±–ª–∞—Å—Ç–∏
            for (const area of discoveryAreas) {
                if (x >= area.x && x <= area.x + area.width && 
                    y >= area.y && y <= area.y + area.height) {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±–ª–∞—Å—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
                    area.element.style.left = `${area.x}px`;
                    area.element.style.top = `${area.y}px`;
                    area.element.classList.add('show');
                    break;
                }
            }
        }

        // –ê–Ω–∏–º–∞—Ü–∏—è
        function animate() {
            // –û—á–∏—â–∞–µ–º canvas
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä –ø—É–ª—å—Å–∞—Ü–∏–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–≤–µ–∑–¥—ã
            nextStarPulseTimer++;
            
            // –£–ø—Ä–∞–≤–ª—è–µ–º –ø—É–ª—å—Å–∞—Ü–∏–µ–π —Å–ª–µ–¥—É—é—â–µ–π –∑–≤–µ–∑–¥—ã (–≤–∫–ª—é—á–∞–µ–º –Ω–∞ 2 —Å–µ–∫—É–Ω–¥—ã –∫–∞–∂–¥—ã–µ 5-10 —Å–µ–∫—É–Ω–¥)
            const pulseInterval = 300; // 5 —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ 60 FPS
            const pulseDuration = 120; // 2 —Å–µ–∫—É–Ω–¥—ã –ø—Ä–∏ 60 FPS
            
            if (nextStarIndex < totalSpecialStars) {
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –¥–æ–ª–∂–Ω–∞ –ª–∏ —Å–ª–µ–¥—É—é—â–∞—è –∑–≤–µ–∑–¥–∞ –ø—É–ª—å—Å–∏—Ä–æ–≤–∞—Ç—å
                const cycleTime = nextStarPulseTimer % (pulseInterval + pulseDuration);
                isNextStarPulsing = cycleTime > pulseInterval;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏ —Ä–∏—Å—É–µ–º –≤—Å–µ –∑–≤–µ–∑–¥—ã
            for (const star of stars) {
                star.update();
                star.draw();
            }
            
            for (const star of specialStars) {
                star.update();
                star.draw();
            }
            
            // –†–∏—Å—É–µ–º —Å–æ–∑–≤–µ–∑–¥–∏–µ
            drawConstellation();
            
            requestAnimationFrame(animate);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏
        function handleMouseMove(e) {
            const x = e.clientX;
            const y = e.clientY;
            
            // –ü–µ—Ä–µ–º–µ—â–∞–µ–º —Ñ–æ–Ω–∞—Ä–∏–∫ (–¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω –≤—ã–∫–ª—é—á–µ–Ω, —á—Ç–æ–±—ã –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –æ–Ω –±—ã–ª –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ)
            flashlight.style.left = `${x}px`;
            flashlight.style.top = `${y}px`;
            
            // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫—É—Ä—Å–æ—Ä
            customCursor.style.left = `${x}px`;
            customCursor.style.top = `${y}px`;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–ª–∞—Å—Ç–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
            if (flashlightEnabled) {
                checkDiscoveryAreas(x, y);
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –∑–≤–µ–∑–¥–∞ –≤ –æ–±–ª–∞—Å—Ç–∏ —Ñ–æ–Ω–∞—Ä–∏–∫–∞
            const flashlightRadius = 100;
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –¥–ª—è –≤—Å–µ—Ö –∑–≤–µ–∑–¥
            for (const star of stars) {
                star.isHighlighted = false;
            }
            
            for (const star of specialStars) {
                if (!star.isActivated && !star.isNext) {
                    star.isHighlighted = false;
                }
            }
            
            // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –∑–≤–µ–∑–¥—ã –≤ –æ–±–ª–∞—Å—Ç–∏ —Ñ–æ–Ω–∞—Ä–∏–∫–∞ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ñ–æ–Ω–∞—Ä–∏–∫ –≤–∫–ª—é—á–µ–Ω)
            if (flashlightEnabled) {
                for (const star of stars) {
                    const dx = star.x - x;
                    const dy = star.y - y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < flashlightRadius) {
                        star.isHighlighted = true;
                    }
                }
                
                for (const star of specialStars) {
                    if (star.isActivated) continue;
                    
                    const dx = star.x - x;
                    const dy = star.y - y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < flashlightRadius) {
                        star.isHighlighted = true;
                    }
                }
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞
        function handleClick(e) {
            const x = e.clientX;
            const y = e.clientY;
            const clickRadius = 20;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–ª–∏–∫–Ω—É–ª–∏ –ª–∏ –Ω–∞ –æ—Å–æ–±—É—é –∑–≤–µ–∑–¥—É
            for (const star of specialStars) {
                if (star.isActivated) continue;
                
                const dx = star.x - x;
                const dy = star.y - y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < clickRadius) {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–∞ –∑–≤–µ–∑–¥–∞ —Å–ª–µ–¥—É—é—â–µ–π –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                    if (star.specialIndex === nextStarIndex) {
                        // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∑–≤–µ–∑–¥—É
                        star.isActivated = true;
                        star.isNext = false;
                        activatedStars.push(star.specialIndex);
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ª–µ–¥—É—é—â—É—é –∑–≤–µ–∑–¥—É
                        nextStarIndex++;
                        if (nextStarIndex < totalSpecialStars) {
                            specialStars[nextStarIndex].isNext = true;
                            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—É–ª—å—Å–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤–æ–π —Å–ª–µ–¥—É—é—â–µ–π –∑–≤–µ–∑–¥—ã
                            nextStarPulseTimer = 0;
                        }
                        
                        updateProgress();
                    } else {
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É
                        showHint("–°–ª–µ–¥—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–≤—ë–∑–¥!");
                    }
                    break;
                }
            }
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç—å—é
        function setupVolumeControl() {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –≥—Ä–æ–º–∫–æ—Å—Ç—å
            backgroundMusic.volume = volumeSlider.value;
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥—Ä–æ–º–∫–æ—Å—Ç–∏
            volumeSlider.addEventListener('input', function() {
                backgroundMusic.volume = this.value;
            });
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ñ–æ–Ω–∞—Ä–∏–∫–∞
        function setupFlashlightToggle() {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–≤—ã–∫–ª—é—á–µ–Ω)
            flashlightToggle.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';
            flashlightToggle.style.boxShadow = 'none';
            
            flashlightToggle.addEventListener('click', function() {
                flashlightEnabled = !flashlightEnabled;
                
                if (flashlightEnabled) {
                    flashlight.classList.add('enabled');
                    flashlightToggle.classList.add('enabled');
                    flashlightToggle.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';
                    flashlightToggle.style.boxShadow = '0 0 5px rgba(255, 255, 255, 0.3)';
                } else {
                    flashlight.classList.remove('enabled');
                    flashlightToggle.classList.remove('enabled');
                    flashlightToggle.style.backgroundColor = 'rgba(255, 0, 0, 0.3)';
                    flashlightToggle.style.boxShadow = 'none';
                    
                    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –∑–≤–µ–∑–¥
                    for (const star of stars) {
                        star.isHighlighted = false;
                    }
                    
                    for (const star of specialStars) {
                        star.isHighlighted = false;
                    }
                    
                    // –°–∫—Ä—ã–≤–∞–µ–º –æ–±–ª–∞—Å—Ç–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
                    discoveryAreas.forEach(area => {
                        area.element.classList.remove('show');
                    });
                }
            });
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º—É–∑—ã–∫–∏
        function setupMusic() {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            backgroundMusic.volume = 0.5;
            
            // –ü–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
            const playMusic = () => {
                backgroundMusic.play().catch(e => {
                    console.log("–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ. –î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –º—É–∑—ã–∫–∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.");
                });
            };
            
            // –ü—ã—Ç–∞–µ–º—Å—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —Å—Ä–∞–∑—É
            playMusic();
            
            // –¢–∞–∫–∂–µ –ø—Ä–æ–±—É–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –ø—Ä–∏ –ª—é–±–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π
            document.addEventListener('click', playMusic, { once: true });
            document.addEventListener('touchstart', playMusic, { once: true });
            document.addEventListener('keydown', playMusic, { once: true });
            
            // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –º—É–∑—ã–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏–≥—Ä–∞—Ç—å
            backgroundMusic.addEventListener('ended', function() {
                this.currentTime = 0;
                this.play();
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –æ–±–ª–∞—Å—Ç–µ–π –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
        function updateDiscoveryAreas() {
            discoveryAreas[1].x = canvas.width - 300;
            discoveryAreas[3].x = canvas.width - 320;
            discoveryAreas[2].y = canvas.height - 300;
            discoveryAreas[3].y = canvas.height - 350;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            createStars();
            animate();
            setupMusic();
            setupVolumeControl();
            setupFlashlightToggle();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
            window.addEventListener('resize', updateDiscoveryAreas);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            window.addEventListener('mousemove', handleMouseMove);
            window.addEventListener('click', handleClick);
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        init();
    </script>
</body>
</html>